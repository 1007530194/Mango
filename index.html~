<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
    <title>Markdown Editor</title>
	<link rel="stylesheet" type="text/css" href="./css/base.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="./css/maxiang.css" media="screen" />
  <!-- <link rel="stylesheet" type="text/css" href="./css/markdown-preview/markdown3.css" media="screen" /> -->
  
  <link rel="stylesheet" type="text/css" href="./js/highlight/styles/monokai_sublime.css">
	<script src="./js/jquery/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="./js/highlight/highlight.pack.js"></script>
	<script type="text/javascript" src="./js/main.js"></script>
  <script type="text/javascript" src="./js/editor.js"></script>
  <script type="text/javascript" src="./js/menu.js"></script>
	<script type="text/javascript" src="./js/taboverride/taboverride.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] },
        TeX: { equationNumbers: {autoNumber: "AMS"} }
      });
    </script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/javascript">
		global.window = window;
		global.$ = $;
        // global.MathJax = MathJax;
		global.gui = require('nw.gui');
    hljs.initHighlightingOnLoad();
		init();
	</script>

</head>
<body>
	<input style="display:none;" id="openFileDialog" type="file" />
	<input style="display:none;" type="file"  id="saveFileDialog" nwsaveas="file.md" />
    <textarea name="markdown" id="editor" class="md_editor"></textarea>
    <div class="md_result" id="preview">
    	
    </div>
    <div id="buffer"
       style="display:none;
              position:absolute; 
              top:0; left: 0"></div>

  <script type="text/javascript">
      var $divs = $('textarea#editor, div#preview');
      var sync = function(e){
          var $other = $divs.not(this).off('scroll'), other = $other.get(0);
          var percentage = this.scrollTop / (this.scrollHeight - this.offsetHeight);
          other.scrollTop = percentage * (other.scrollHeight - other.offsetHeight);
          setTimeout( function(){ $other.on('scroll', sync ); },200);
      }
      $divs.on('scroll', sync);
  </script>
</body>
</html>