<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mango Editor for Markdown</title>
  <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/base.css" media="screen" />
  <!-- <link rel="stylesheet" type="text/css" href="./css/maxiang.css" media="screen" /> -->
  <!-- <link rel="stylesheet" type="text/css" href="./css/markdown-preview/markdown3.css" media="screen" /> -->
  <link rel="stylesheet" type="text/css" href="./js/highlight/styles/monokai_sublime_with_maxiang.css" media="screen" />
  
  
  <!-- <link rel="stylesheet" type="text/css" href="./js/highlight/styles/monokai_sublime.css"> -->
  <!-- <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css" media="screen"/> -->
  <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script> -->
	<script src="./js/jquery/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="./js/highlight/highlight.pack.js"></script>
	<script type="text/javascript" src="./js/main.js"></script>
  <script type="text/javascript" src="./js/editor.js"></script>
  <script type="text/javascript" src="./js/menu.js"></script>
	<script type="text/javascript" src="./js/taboverride/taboverride.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] },
        TeX: { equationNumbers: {autoNumber: "AMS"} }
      });
    </script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/javascript">
		global.window = window;
		global.$ = $;
        // global.MathJax = MathJax;
		global.gui = require('nw.gui');
    hljs.initHighlightingOnLoad();
		init();
	</script>

</head>
<body>
	<input style="display:none;" id="openFileDialog" type="file" />
	<input style="display:none;" type="file"  id="saveFileDialog" nwsaveas="file.md" />
  <input style="display:none;" type="file"  id="saveasFileDialog" nwsaveas="" />
  <input style="display:none;" type="file"  id="pdfFileDialog" nwsaveas="file.pdf" />
  <input style="display:none;" type="file"  id="htmlFileDialog" nwsaveas="file.html" />
  <div class="background">
    <textarea name="markdown" id="editor" class="md_editor"></textarea>
    <div class="md_result" id="preview">
      
    </div>
    <div id="buffer"
       style="display:none;
              position:absolute; 
              top:0; left: 0"></div>
  </div>
    

  <script type="text/javascript">
      var $divs = $('textarea#editor, div#preview');
      var sync = function(e){
          var $other = $divs.not(this).off('scroll'), other = $other.get(0);
          var percentage = this.scrollTop / (this.scrollHeight - this.offsetHeight);
          other.scrollTop = percentage * (other.scrollHeight - other.offsetHeight);
          setTimeout( function(){ $other.on('scroll', sync ); },200);
      }
      $divs.on('scroll', sync);

      $(".md_result").on('click', 'a', function (e) {

          e.preventDefault();
          console.log("asd");
          // Open URL with default browser.
          global.gui.Shell.openExternal(e.target.href);

      });
  </script>
  <script type="text/javascript" src="./node_modules/bootbox/bootbox.min.js"></script>
  
</body>
</html>
